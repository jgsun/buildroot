config BR2_PACKAGE_PLY_ARCH_SUPPORTS
	bool
	default y if BR2_aarch64
	default y if BR2_arm
	default y if BR2_powerpc
	default y if BR2_x86_64

comment "ply needs a toolchain w/ dynamic library, headers >= 4.14"
	depends on BR2_PACKAGE_PLY_ARCH_SUPPORTS
	depends on BR2_USE_MMU
	depends on !BR2_TOOLCHAIN_HEADERS_AT_LEAST_4_14 || BR2_STATIC_LIBS

config BR2_PACKAGE_PLY
	bool "ply"
	depends on BR2_PACKAGE_PLY_ARCH_SUPPORTS
	depends on BR2_USE_MMU # fork()
	depends on BR2_TOOLCHAIN_HEADERS_AT_LEAST_4_14 # BPF_JLT
	depends on !BR2_STATIC_LIBS
	help
	  ply is a light-weight dynamic tracer for Linux. By means of
	  using the BPF it can attach probes to the linux kernel
	  (e. g. kprobes).

	  It's a small alternative to LLVM based tracers for embedded
	  systems.

	  When using debugfs needs to be mounted on /sys/kernel/debug.
config BR2_PACKAGE_PLY
	bool "ply"
	depends on BR2_x86_64 || BR2_aarch64 || BR2_arm || BR2_ppc # needs <cpuid.h>
	depends on BR2_TOOLCHAIN_USES_UCLIBC || BR2_TOOLCHAIN_USES_GLIBC
	help
	  ply dynamically instruments the running kernel to aggregate and
	  extract user-defined data. It compiles an input program to one or
	  more Linux bpf(2) binaries and attaches them to arbitrary points
	  in the kernel using kprobes and tracepoints.

	  https://wkz.github.io/ply/
